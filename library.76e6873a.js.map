{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-d546ca91cf15ebbc.js","src/JS/library-markups.js","node_modules/@parcel/runtime-js/lib/runtime-8b86bb0aef3a10a2.js","src/JS/library-main.js","src/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.76e6873a.js\\\",\\\"flgBf\\\":\\\"index-main-mobile.7ce6b2f7.jpg\\\",\\\"5UbS1\\\":\\\"index.cb5aac83.css\\\",\\\"eM9ss\\\":\\\"library.8c865b5f.js\\\"}\"));","import { getFromLocalStorage } from './localStorage';\nexport { markupMovies };\nimport img from '../images/index-main/index-main-mobile.jpg';\n\nfunction markupMovies(films) {\n  return films\n    .map(\n      ({\n        id,\n        title,\n        name,\n        poster_path,\n        genre_ids,\n        release_date,\n        first_air_date,\n        vote_average,\n        vote = vote_average.toFixed(1) || ' - ',\n        year = release_date || first_air_date || ' - ',\n      }) => {\n        const parseGenres = getFromLocalStorage('genres');\n\n        const genreName = genre_ids.map(element =>\n          parseGenres.genres.find(genre => genre.id === element)\n        );\n        let genreOutput;\n        if (genre_ids.length > 3) {\n          genreOutput = genreName.map(element => element.name).slice(0, 2);\n          genreOutput.push('Other');\n        } else {\n          genreOutput = genreName.map(element => element.name);\n        }\n\n        const defaultImg = !poster_path\n          ? img\n          : `https://image.tmdb.org/t/p/w500${poster_path}`;\n\n        return `<li class=\"gallery__item\">\n                <a class=\"gallery__link\" href=\"\">\n                    <img class=\"gallery__image\" data-id=${id} src=${defaultImg} alt=\"${title}\" loading=\"lazy\">\n                </a>\n                <div class=\"gallery__info\">\n                    <p class=\"gallery__title\">${title || name}</p>\n                    <p class=\"gallery__genre\">${genreOutput.join(', ')}</p>\n                    <p class=\"gallery__year\">${year.slice(0, 4)}</p>\n                    <p class=\"gallery__vote\">${vote}</p>\n                </div>\n            </li>`;\n      }\n    )\n    .join('');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"flgBf\")).toString();","import { markupMovies } from './library-markups';\nimport { paginationMarkup, paginationMarkupMobile } from './pagination-markups';\nimport { getFromLocalStorage } from './localStorage';\nimport onModalEvents from './modal-film';\n\nexport { pagination };\n\nconst moviesList = document.querySelector('.gallery');\nconst paginationNav = document.querySelector('.pagination__wrapper');\nconst paginationWrapper = document.querySelector('.pagination__pages');\nconst nextButton = document.querySelector('#next-button');\nconst prevButton = document.querySelector('#prev-button');\n\nlet currentPage;\nlet pageCount;\nconst paginationLimit = 9;\nlet movies = [];\n\nprevButton.addEventListener('click', () => {\n  renderPage(currentPage - 1);\n});\n\nnextButton.addEventListener('click', () => {\n  renderPage(currentPage + 1);\n});\n\npaginationWrapper.addEventListener('click', e => {\n  if (e.target.hasAttribute('page-index')) {\n    renderPage(Number(e.target.getAttribute('page-index')));\n  }\n});\n\n//Render and pagination\nfunction pagination(key) {\n  updateMovies(key);\n\n  if (!movies.length) {\n    paginationNav.classList.add('hidden');\n    return;\n  }\n  currentPage = 1;\n  paginationNav.classList.remove('hidden');\n  pageCount = Math.ceil(movies.length / paginationLimit);\n\n  renderPage(currentPage);\n}\n\nfunction updateMovies(key) {\n  movies = getFromLocalStorage(key);\n\n  if (!movies || !movies.length) {\n    movies = [];\n    clearContainer(moviesList);\n    insertListItems('Oops...Nothing added.');\n    return;\n  }\n}\n\nfunction renderPage(pageNum) {\n  currentPage = pageNum;\n  const prevRange = (pageNum - 1) * paginationLimit;\n  const currRange = pageNum * paginationLimit;\n  const currentMovies = movies.slice(prevRange, currRange);\n  clearContainer(moviesList);\n  insertListItems(markupMovies(currentMovies));\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n\n  const width = document.documentElement.clientWidth;\n  width >= 768\n    ? getPaginationNumbers(paginationMarkup(currentPage, pageCount))\n    : getPaginationNumbers(paginationMarkupMobile(currentPage, pageCount));\n  handleActivePageNumber();\n  handlePageButtonsStatus();\n}\n\nfunction getPaginationNumbers(items) {\n  clearContainer(paginationWrapper);\n\n  const pages = items.map(item => {\n    if (typeof item === 'number') {\n      const pageNumber = document.createElement('button');\n      pageNumber.className = 'pagination__number';\n      pageNumber.innerHTML = item;\n      pageNumber.setAttribute('page-index', item);\n      pageNumber.setAttribute('aria-label', 'Page ' + item);\n      return pageNumber;\n    }\n\n    if (typeof item === 'string') {\n      const dots = document.createElement('span');\n      dots.innerHTML = item;\n      return dots;\n    }\n  });\n  paginationWrapper.append(...pages);\n}\n\nfunction insertListItems(items) {\n  moviesList.insertAdjacentHTML('beforeend', items);\n}\n\nfunction clearContainer(container) {\n  container.innerHTML = '';\n}\n\n// Handle pagination buttons\n\nfunction handleActivePageNumber() {\n  document.querySelectorAll('.pagination__number').forEach(button => {\n    button.classList.remove('activePage');\n\n    const pageIndex = Number(button.getAttribute('page-index'));\n\n    if (pageIndex === currentPage) {\n      button.classList.add('activePage');\n    }\n  });\n}\n\nfunction disableButton(button) {\n  button.classList.add('hidden');\n}\n\nfunction enableButton(button) {\n  button.classList.remove('hidden');\n}\n\nfunction handlePageButtonsStatus() {\n  if (currentPage === 1) {\n    disableButton(prevButton);\n  } else {\n    enableButton(prevButton);\n  }\n\n  if (pageCount === currentPage) {\n    disableButton(nextButton);\n  } else {\n    enableButton(nextButton);\n  }\n}\n\nmoviesList.addEventListener('click', evt => {\n  onModalEvents(evt, () => {\n    pagination(localStorage.getItem(`page`));\n  });\n});\n","import { pagination } from './JS/library-main';\nimport { modalFooter } from './JS/modal-footer';\nimport './JS/themeRender';\n\nconst watchedButton = document.querySelector('.button_watched');\nconst queueButton = document.querySelector('.button_queue');\n\nconst watchedKey = 'watchedFilms';\nconst queuedKey = 'queuedFilms';\n\nconst watchedMovies = () => {\n  pagination(watchedKey);\n  queueButton.classList.remove('button_queue');\n  watchedButton.classList.add('button_queue');\n  watchedButton.classList.remove('button_watched');\n  queueButton.classList.add('button_watched');\n  localStorage.setItem('page', watchedKey);\n};\n\nconst queuedMovies = () => {\n  pagination(queuedKey);\n  watchedButton.classList.remove('button_queue');\n  queueButton.classList.add('button_queue');\n  queueButton.classList.remove('button_watched');\n  watchedButton.classList.add('button_watched');\n  localStorage.setItem('page', queuedKey);\n};\n\nwindow.addEventListener('load', () => {\n  const data = localStorage.getItem('page');\n  data === watchedKey ? watchedMovies() : queuedMovies();\n});\n\nwatchedButton.addEventListener('click', watchedMovies);\n\nqueueButton.addEventListener('click', queuedMovies);\n\nmodalFooter();\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$gSWVZ","$bd549be9f79ecbed$exports","URL","resolve","import","meta","url","toString","$3b3286655c014117$var$moviesList","document","querySelector","$3b3286655c014117$var$paginationNav","$3b3286655c014117$var$paginationWrapper","$3b3286655c014117$var$nextButton","$3b3286655c014117$var$prevButton","$3b3286655c014117$var$currentPage","$3b3286655c014117$var$pageCount","$3b3286655c014117$var$movies","$3b3286655c014117$export$22fa394f3ba39578","key","getFromLocalStorage","$3b3286655c014117$var$clearContainer","$3b3286655c014117$var$insertListItems","$3b3286655c014117$var$updateMovies","classList","remove","Math","ceil","$3b3286655c014117$var$renderPage","add","pageNum","prevRange","currRange","currentMovies","slice","map","title","name","poster_path","genre_ids","release_date","first_air_date","vote_average","vote","toFixed","year","parseGenres","genreName","element","genres","find","genre","genreOutput","push","$parcel$interopDefault","join","window","scrollTo","top","left","behavior","$3b3286655c014117$var$getPaginationNumbers","documentElement","clientWidth","$a7KuE","paginationMarkup","paginationMarkupMobile","querySelectorAll","forEach","button","Number","getAttribute","$3b3286655c014117$var$disableButton","$3b3286655c014117$var$enableButton","$3b3286655c014117$var$handlePageButtonsStatus","items","pages","item","pageNumber","createElement","className","innerHTML","setAttribute","dots","append","insertAdjacentHTML","container","addEventListener","e","target","hasAttribute","evt","$3C0xE","default","localStorage","getItem","$ce3726a01b8ab25a$var$watchedButton","$ce3726a01b8ab25a$var$queueButton","$ce3726a01b8ab25a$var$watchedMovies","setItem","$ce3726a01b8ab25a$var$queuedMovies","$3H9nF","modalFooter"],"version":3,"file":"library.76e6873a.js.map"}