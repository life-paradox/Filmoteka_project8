{"mappings":"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","sources":["src/JS/index-markups.js","src/JS/pagination.js","src/JS/main.js","src/index.js","src/JS/slider.js"],"sourcesContent":["import { getFromLocalStorage } from './localStorage';\nexport { paginationMarkup, paginationMarkupMobile, markupMovies };\n\nfunction paginationMarkup(currentPage, pageCount) {\n  if (pageCount <= 1) return [1];\n  const center = [\n      currentPage - 2,\n      currentPage - 1,\n      currentPage,\n      currentPage + 1,\n      currentPage + 2,\n    ],\n    filteredCenter = center.filter(p => p > 1 && p < pageCount),\n    includeThreeLeft = currentPage === 5,\n    includeThreeRight = currentPage === pageCount - 4,\n    includeLeftDots = currentPage > 5,\n    includeRightDots = currentPage < pageCount - 4;\n\n  if (includeThreeLeft) filteredCenter.unshift(2);\n  if (includeThreeRight) filteredCenter.push(pageCount - 1);\n\n  if (includeLeftDots) filteredCenter.unshift('...');\n  if (includeRightDots) filteredCenter.push('...');\n\n  return [1, ...filteredCenter, pageCount];\n}\n\nfunction paginationMarkupMobile(currentPage, pageCount) {\n  if (pageCount <= 1) return [1];\n  const center = [\n    currentPage - 2,\n    currentPage - 1,\n    currentPage,\n    currentPage + 1,\n    currentPage + 2,\n  ];\n  filteredCenter = center.filter(p => p >= 1 && p <= pageCount);\n  includeTwoRight = currentPage === 1;\n  includeOneRight = currentPage === 2;\n\n  if (includeTwoRight) filteredCenter.push(currentPage + 3, currentPage + 4);\n  if (includeOneRight) filteredCenter.push(currentPage + 3);\n\n  return [...filteredCenter];\n}\n\nfunction markupMovies(films) {\n  console.log(films)\n  const galleryRef = document.querySelector(\".gallery\");\n  const savedGenres = localStorage.getItem(\"genres\");\n  const parseGenres = JSON.parse(savedGenres);\n  const markup = films.results.map(({title, poster_path, genre_ids, release_date, first_air_date,\n    year = release_date || first_air_date || ' - ',\n  }) => { \n    \n    const genreName = genre_ids.map(element =>\n      parseGenres.genres.find(genre => genre.id === element));\n      let genreOutput;\n      if (genre_ids.length > 3) {\n        genreOutput = genreName.map(element=> element.name).slice(0,2);\n        genreOutput.push('інші');\n      } else {\n        genreOutput = genreName.map(element=> element.name);\n      }\n          return `<li class=\"gallery__item\">\n            <a class=\"gallery__link\" href=\"\">\n                <img class=\"gallery__image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" loading=\"lazy\">\n            </a>\n            <div class=\"gallery__info\">\n                <p class=\"gallery__title cut-text\">${title}</p>\n\n                <p class=\"gallery__genre\">${genreOutput.join(', ')}</p>     \n                <p class=\"gallery__year\">${year.slice(0, 4)}</p>\n\n            </div>\n        </li>`\n      }).join('');\nreturn markup\n}\n\nexport {galleryRef}","import {\n  paginationMarkup,\n  paginationMarkupMobile,\n  markupMovies,\n} from './index-markups';\nimport { fetchPopFilms, renderFilms } from './main';\n\nexport { pagination };\nexport { currentPage };\n\n\nconst galleryRef = document.querySelector('.gallery');\nconst paginationNav = document.querySelector('.pagination__wrapper');\nconst paginationWrapper = document.querySelector('.pagination__pages');\nconst nextButton = document.querySelector('#next-button');\nconst prevButton = document.querySelector('#prev-button');\n\nlet currentPage;\nlet pageCount;\nconst paginationLimit = 20;\nlet movies;\n\n//Render and pagination\nfunction pagination(films) {\n  movies = films;\n\n  if (movies.results.length === 0) {\n    paginationNav.classList.add('hidden');\n    return;\n  }\n\n  // paginationNav.classList.remove('hidden');\n  pageCount = Math.ceil(movies.total_results / paginationLimit);\n  renderPage(films);\n\n  prevButton.addEventListener('click', () => {\n    fetchPopFilms(currentPage - 1).then(renderPage);\n\n    \n  });\n\n  nextButton.addEventListener('click', () => {\n    fetchPopFilms(currentPage + 1).then(renderPage);\n  });\n\n  paginationWrapper.addEventListener('click', e => {\n    if (e.target.hasAttribute('page-index')) {\n      fetchPopFilms(Number(e.target.getAttribute('page-index'))).then(renderPage);\n      \n    }\n  });\n}\n\n\nfunction renderPage(films) {\n  currentPage = films.page;\nconsole.log(films)\n  // const prevRange = (pageNum - 1) * paginationLimit;\n  // const currRange = pageNum * paginationLimit;\n  const currentMovies = films.results;\n  console.log(currentMovies);\n  clearContainer(galleryRef);\n  insertListItems(markupMovies(films));\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n\n  window.innerWidth >= 768\n    ? getPaginationNumbers(paginationMarkup(currentPage, pageCount))\n    : getPaginationNumbers(paginationMarkupMobile(currentPage, pageCount));\n  handleActivePageNumber();\n  handlePageButtonsStatus();\n}\n\nfunction getPaginationNumbers(items) {\n  clearContainer(paginationWrapper);\n\n  const pages = items.map(item => {\n    if (typeof item === 'number') {\n      const pageNumber = document.createElement('button');\n      pageNumber.className = 'pagination__number';\n      pageNumber.innerHTML = item;\n      pageNumber.setAttribute('page-index', item);\n      pageNumber.setAttribute('aria-label', 'Page ' + item);\n      return pageNumber;\n    }\n\n    if (typeof item === 'string') {\n      const dots = document.createElement('span');\n      dots.innerHTML = item;\n      return dots;\n    }\n  });\n  paginationWrapper.append(...pages);\n}\n\nfunction insertListItems(items) {\n  galleryRef.insertAdjacentHTML('beforeend', items);\n}\n\nfunction clearContainer(container) {\n  container.innerHTML = '';\n}\n\n// Handle pagination buttons\n\nfunction handleActivePageNumber() {\n  document.querySelectorAll('.pagination__number').forEach(button => {\n    button.classList.remove('active');\n\n    const pageIndex = Number(button.getAttribute('page-index'));\n\n    if (pageIndex === currentPage) {\n      button.classList.add('active');\n    }\n  });\n}\n\nfunction disableButton(button) {\n  button.classList.add('hidden');\n}\n\nfunction enableButton(button) {\n  button.classList.remove('hidden');\n}\n\nfunction handlePageButtonsStatus() {\n  if (currentPage === 1) {\n    disableButton(prevButton);\n  } else {\n    enableButton(prevButton);\n  }\n\n  if (pageCount === currentPage) {\n    disableButton(nextButton);\n  } else {\n    enableButton(nextButton);\n  }\n}\n","import { API_KEY } from \"./api-key\";\nimport { currentPage } from \"./pagination\";\nconst galleryRef = document.querySelector(\".gallery\");\n\n// фетч жанров\n\n// https://api.themoviedb.org/3/genre/movie/list?api_key=861782ee1fc6aacf939bc06e51306075&language=uk-UA\nfunction genres() {\n\n  if (localStorage.getItem(\"genres\")) {\n  return\n  }\n  else {\n  const fetchGenres = async () => {\n  const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}&language=uk-UA`);\n  const genres = await response.json();\n  localStorage.setItem(\"genres\", JSON.stringify(genres))\n  };\n  fetchGenres();\n}\n}\nexport { genres };\n\n\n// Фетч популярных фильмов\nconst fetchPopFilms = async (page) => {\n  const response = await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}&language=uk-UA&page=${page}`);\n  const films = await response.json();\n  console.log(films);\n  return films;\n};\nexport { fetchPopFilms };\n\n  \n  // фетч по ключевому слову\n  const fetchQueryFilm = async (query) => {\n  const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&language=uk-UA&query=${query}&page=1&include_adult=false`);\n  const films = await response.json();\n  console.log(films);\n  return films;\n};\nexport { fetchQueryFilm };\n  \n  // Рендер карточек\nfunction renderFilms(films) {\n  const savedGenres = localStorage.getItem(\"genres\");\n  const parseGenres = JSON.parse(savedGenres);\n  const markup = films.results.map(({title, poster_path, genre_ids, release_date, first_air_date,\n    year = release_date || first_air_date || ' - ',\n  }) => { \n    \n    const genreName = genre_ids.map(element =>\n      parseGenres.genres.find(genre => genre.id === element));\n      let genreOutput;\n       if (genre_ids.length > 3) {\n        genreOutput = genreName.map(element=> element.name).slice(0,2);\n        genreOutput.push('інщі');\n       } else {\n        genreOutput = genreName.map(element=> element.name);\n       }\n\n      console.log(genreOutput);\n          return `<li class=\"gallery__item\">\n            <a class=\"gallery__link\" href=\"\">\n                <img class=\"gallery__image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" loading=\"lazy\">\n            </a>\n            <div class=\"gallery__info\">\n                <p class=\"gallery__title cut-text\">${title}</p>\n\n                <p class=\"gallery__genre\">${genreOutput.join(', ')}</p>     \n                <p class=\"gallery__year\">${year.slice(0, 4)}</p>\n\n            </div>\n        </li>`\n      }).join('');\n  console.log(films.results);\n  galleryRef.innerHTML = markup;\n  return films;\n}\nexport { renderFilms };\n\n\n//Парсінг жанрів\n// const savedGenres = localStorage.getItem(\"genres\");\n// const parseGenres = JSON.parse(savedGenres);\n// console.log(parseGenres.genres);\n","import { fetchPopFilms, renderFilms } from './JS/main';\nimport { renderFilms } from './JS/main';\nimport { slider } from './JS/slider';\nimport { pagination } from \"./JS/pagination\";\nimport { fetchQueryFilm } from \"./JS/main\";\nimport { genres } from \"./JS/main\";\n\n\ngenres();\n\nfetchPopFilms(1).then(pagination);\n\n\n\n\n// поиск по ключевому слову\n\nconst formRef = document.querySelector(\".header-search-form\");\nformRef.addEventListener(\"submit\", onSearch);\nfunction onSearch(e) {\n  e.preventDefault();\n  const searchData = formRef.elements.searchQuery.value.trim();\n  console.log(searchData);\n  if (searchData !== '') {\n    fetchQueryFilm(searchData).then(renderFilms);\n  }\n}\n\nslider();","export const slider = () => {\n  const slidesContainer = document.getElementById('slides-container');\n  const slide = document.querySelector('.slide');\n  const prevButton = document.getElementById('slide-arrow-prev');\n  const nextButton = document.getElementById('slide-arrow-next');\n\n  nextButton.addEventListener('click', () => {\n    const slideWidth = slide.clientWidth;\n    slidesContainer.scrollLeft += slideWidth;\n  });\n\n  prevButton.addEventListener('click', () => {\n    const slideWidth = slide.clientWidth;\n    slidesContainer.scrollLeft -= slideWidth;\n  });\n};\n"],"names":["$927687c3e07eac1d$export$a88ca8237831132f","currentPage","pageCount","filteredCenter","filter","p","includeThreeRight","includeLeftDots","includeRightDots","unshift","push","$927687c3e07eac1d$export$abd042700647fb27","includeTwoRight","includeOneRight","$196cec3603ab2175$var$galleryRef","document","querySelector","$196cec3603ab2175$var$paginationNav","$196cec3603ab2175$var$paginationWrapper","$196cec3603ab2175$var$nextButton","$196cec3603ab2175$var$prevButton","$196cec3603ab2175$export$385972cd6b54c3e1","$196cec3603ab2175$var$pageCount","$196cec3603ab2175$var$movies","$196cec3603ab2175$var$renderPage","films","page","console","log","currentMovies","results","items","$196cec3603ab2175$var$clearContainer","savedGenres","localStorage","getItem","parseGenres","JSON","parse","map","title","poster_path","genre_ids","release_date","first_air_date","year","genreName","element","genres","find","genre","id","genreOutput","length","name","slice","join","insertAdjacentHTML","window","scrollTo","top","left","behavior","innerWidth","$196cec3603ab2175$var$getPaginationNumbers","querySelectorAll","forEach","button","classList","remove","Number","getAttribute","add","$196cec3603ab2175$var$disableButton","$196cec3603ab2175$var$enableButton","$196cec3603ab2175$var$handlePageButtonsStatus","pages","item","pageNumber","createElement","className","innerHTML","setAttribute","dots","append","container","$0e773294198e22c6$var$galleryRef","$0e773294198e22c6$export$c8824d5a35bdf721","async","response","fetch","json","$0e773294198e22c6$export$a869a31389217de6","query","$0e773294198e22c6$export$e98cbe51299acd52","markup","genres1","setItem","stringify","fetchGenres","then","Math","ceil","total_results","addEventListener","e","target","hasAttribute","$1f0dc3b9307be026$var$formRef","preventDefault","searchData","elements","searchQuery","value","trim","slidesContainer","getElementById","slide","prevButton","slideWidth","clientWidth","scrollLeft"],"version":3,"file":"index.7738fbad.js.map"}