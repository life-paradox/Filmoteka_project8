{"mappings":"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","sources":["src/JS/library-main.js","src/JS/library-markups.js","src/library.js"],"sourcesContent":["import { markupMovies } from './library-markups';\nimport { paginationMarkup, paginationMarkupMobile } from './pagination-markups';\nimport { getFromLocalStorage } from './localStorage';\n\nexport { pagination };\n\nconst moviesList = document.querySelector('.gallery');\nconst paginationNav = document.querySelector('.pagination__wrapper');\nconst paginationWrapper = document.querySelector('.pagination__pages');\nconst nextButton = document.querySelector('#next-button');\nconst prevButton = document.querySelector('#prev-button');\n\nlet currentPage;\nlet pageCount;\nconst paginationLimit = 2;\nlet movies = [];\n\n//Render and pagination\nfunction pagination(key) {\n  updateMovies(key);\n\n  if (movies.length === 0) {\n    paginationNav.classList.add('hidden');\n    return;\n  }\n\n  paginationNav.classList.remove('hidden');\n  pageCount = Math.ceil(movies.length / paginationLimit);\n  renderPage(1);\n\n  prevButton.addEventListener('click', () => {\n    renderPage(currentPage - 1);\n  });\n\n  nextButton.addEventListener('click', () => {\n    renderPage(currentPage + 1);\n  });\n\n  paginationWrapper.addEventListener('click', e => {\n    if (e.target.hasAttribute('page-index')) {\n      renderPage(Number(e.target.getAttribute('page-index')));\n    }\n  });\n}\n\nfunction updateMovies(key) {\n  movies = getFromLocalStorage(key);\n\n  if (movies === null) {\n    movies = [];\n    clearContainer(moviesList);\n    insertListItems('Oops...Nothing added.');\n    return;\n  }\n}\n\nfunction renderPage(pageNum) {\n  currentPage = pageNum;\n\n  const prevRange = (pageNum - 1) * paginationLimit;\n  const currRange = pageNum * paginationLimit;\n  const currentMovies = movies.slice(prevRange, currRange);\n  clearContainer(moviesList);\n  insertListItems(markupMovies(currentMovies));\n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth',\n  });\n\n  const width = document.documentElement.clientWidth;\n  width >= 768\n    ? getPaginationNumbers(paginationMarkup(currentPage, pageCount))\n    : getPaginationNumbers(paginationMarkupMobile(currentPage, pageCount));\n  handleActivePageNumber();\n  handlePageButtonsStatus();\n}\n\nfunction getPaginationNumbers(items) {\n  clearContainer(paginationWrapper);\n\n  const pages = items.map(item => {\n    if (typeof item === 'number') {\n      const pageNumber = document.createElement('button');\n      pageNumber.className = 'pagination__number';\n      pageNumber.innerHTML = item;\n      pageNumber.setAttribute('page-index', item);\n      pageNumber.setAttribute('aria-label', 'Page ' + item);\n      return pageNumber;\n    }\n\n    if (typeof item === 'string') {\n      const dots = document.createElement('span');\n      dots.innerHTML = item;\n      return dots;\n    }\n  });\n  paginationWrapper.append(...pages);\n}\n\nfunction insertListItems(items) {\n  moviesList.insertAdjacentHTML('beforeend', items);\n}\n\nfunction clearContainer(container) {\n  container.innerHTML = '';\n}\n\n// Handle pagination buttons\n\nfunction handleActivePageNumber() {\n  document.querySelectorAll('.pagination__number').forEach(button => {\n    button.classList.remove('activePage');\n\n    const pageIndex = Number(button.getAttribute('page-index'));\n\n    if (pageIndex === currentPage) {\n      button.classList.add('activePage');\n    }\n  });\n}\n\nfunction disableButton(button) {\n  button.classList.add('hidden');\n}\n\nfunction enableButton(button) {\n  button.classList.remove('hidden');\n}\n\nfunction handlePageButtonsStatus() {\n  if (currentPage === 1) {\n    disableButton(prevButton);\n  } else {\n    enableButton(prevButton);\n  }\n\n  if (pageCount === currentPage) {\n    disableButton(nextButton);\n  } else {\n    enableButton(nextButton);\n  }\n}\n","import { getFromLocalStorage } from './localStorage';\nexport { markupMovies };\n\nfunction markupMovies(films) {\n  return films\n    .map(\n      ({\n        title,\n        name,\n        poster_path,\n        genre_ids,\n        release_date,\n        first_air_date,\n        vote_average,\n        vote = vote_average.toFixed(1) || ' - ',\n        year = release_date || first_air_date || ' - ',\n      }) => {\n        const parseGenres = getFromLocalStorage('genres');\n        const genreName = genre_ids.map(element =>\n          parseGenres.genres.find(genre => genre.id === element)\n        );\n        let genreOutput;\n        if (genre_ids.length > 3) {\n          genreOutput = genreName.map(element => element.name).slice(0, 2);\n          genreOutput.push('Other');\n        } else {\n          genreOutput = genreName.map(element => element.name);\n        }\n\n        return `<li class=\"gallery__item\">\n                <a class=\"gallery__link\" href=\"\">\n                    <img class=\"gallery__image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" loading=\"lazy\">\n                </a>\n                <div class=\"gallery__info\">\n                    <p class=\"gallery__title\">${title || name}</p>\n                    <p class=\"gallery__genre\">${genreOutput.join(', ')}</p>\n                    <p class=\"gallery__year\">${year.slice(0, 4)}</p>\n                    <p class=\"gallery__vote\">${vote}</p>\n                </div>\n            </li>`;\n      }\n    )\n    .join('');\n}\n","import { pagination } from './JS/library-main';\nimport { getFromLocalStorage } from './JS/localStorage';\n\nimport { theme } from './JS/themeRender';\n\nimport { slider } from './JS/slider';\nimport Modal from './JS/modal';\n\nconst watchedButton = document.querySelector('.button_watched');\nconst queueButton = document.querySelector('.button_queue');\n\nconst watchedKey = 'watchedFilms';\nconst queuedKey = 'queuedFilms';\n\nconst watchedMovies = () => {\n  pagination(watchedKey);\n  queueButton.classList.remove('button_queue');\n  watchedButton.classList.add('button_queue');\n  watchedButton.classList.remove('button_watched');\n  queueButton.classList.add('button_watched');\n  localStorage.setItem('page', watchedKey);\n};\n\nconst queuedMovies = () => {\n  pagination(queuedKey);\n  watchedButton.classList.remove('button_queue');\n  queueButton.classList.add('button_queue');\n  queueButton.classList.remove('button_watched');\n  watchedButton.classList.add('button_watched');\n  localStorage.setItem('page', queuedKey);\n};\n\nwindow.addEventListener('load', () => {\n  const data = localStorage.getItem('page');\n  data === watchedKey ? watchedMovies() : queuedMovies();\n});\n\nwatchedButton.addEventListener('click', watchedMovies);\n\nqueueButton.addEventListener('click', queuedMovies);\n"],"names":["$8nrFW","parcelRequire","$aNvF6","$3c6ad4b0f10f2ae7$var$currentPage","$3c6ad4b0f10f2ae7$var$pageCount","$3c6ad4b0f10f2ae7$var$moviesList","document","querySelector","$3c6ad4b0f10f2ae7$var$paginationNav","$3c6ad4b0f10f2ae7$var$paginationWrapper","$3c6ad4b0f10f2ae7$var$nextButton","$3c6ad4b0f10f2ae7$var$prevButton","$3c6ad4b0f10f2ae7$var$movies","$3c6ad4b0f10f2ae7$export$22fa394f3ba39578","key","getFromLocalStorage","$3c6ad4b0f10f2ae7$var$clearContainer","$3c6ad4b0f10f2ae7$var$insertListItems","$3c6ad4b0f10f2ae7$var$updateMovies","length","classList","remove","Math","ceil","$3c6ad4b0f10f2ae7$var$renderPage","addEventListener","e","target","hasAttribute","Number","getAttribute","add","pageNum","prevRange","currRange","currentMovies","slice","map","param","genreOutput","title","name","poster_path","genre_ids","release_date","first_air_date","vote_average","_vote","vote","toFixed","_year","year","parseGenres","genreName","element","genres","find","genre","id","push","concat","join","window","scrollTo","top","left","behavior","$3c6ad4b0f10f2ae7$var$getPaginationNumbers","documentElement","clientWidth","$fM7Nq","paginationMarkup","paginationMarkupMobile","querySelectorAll","forEach","button","$3c6ad4b0f10f2ae7$var$disableButton","$3c6ad4b0f10f2ae7$var$enableButton","$3c6ad4b0f10f2ae7$var$handlePageButtonsStatus","items","_paginationWrapper","pages","item","pageNumber","createElement","className","innerHTML","setAttribute","dots","append","apply","$parcel$interopDefault","insertAdjacentHTML","container","$cecbdd76f2d3d4bd$var$watchedButton","$cecbdd76f2d3d4bd$var$queueButton","$cecbdd76f2d3d4bd$var$watchedKey","$cecbdd76f2d3d4bd$var$queuedKey","$cecbdd76f2d3d4bd$var$watchedMovies","localStorage","setItem","$cecbdd76f2d3d4bd$var$queuedMovies","getItem"],"version":3,"file":"library.52c66e15.js.map"}